<mat-toolbar color="primary">
  Catalogo Videogiochi
  <span class="spacer"></span>
  <button mat-flat-button color="accent" (click)="open()">
    <mat-icon>add</mat-icon>
    Aggiungi Videogioco
  </button>
</mat-toolbar>

<div class="catalog-container">
  @if (videogames$ | async; as videogames) {
    @for (game of videogames; track game.idVideogame) {
      <mat-card class="game-card mat-elevation-z4">
        <mat-card-header>
          <mat-card-title>{{ game.titleVideogame }}</mat-card-title>
          <mat-card-subtitle>{{ game.priceVideogame | currency:'EUR' }}</mat-card-subtitle>
        </mat-card-header>

        <mat-card-content>
          <p>{{ game.descVideogame }}</p>

          @for (genre of game.genres; track genre.name) {
            <mat-chip class="genres" color="accent" selected>
              {{ genre.name }}
            </mat-chip>
          }

          @for (star of [1, 2, 3, 4, 5]; track $index) {
            <mat-icon
              color="warn"
              (click)="rateGame(game.idVideogame, $index + 1)"
              (mouseenter)="hoveredRating[game.idVideogame] = $index + 1"
            >
              {{ (hoveredRating[game.idVideogame] || game.rating) > $index ? 'star' : 'star_border' }}
            </mat-icon>
          }
        </mat-card-content>
      </mat-card>
    }
  } @else {
    <div class="loading">
      <mat-spinner></mat-spinner>
    </div>
  }
</div>
